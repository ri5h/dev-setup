- hosts: localhost

  pre_tasks:
    - name: "Verifying playbook requirements"
      tags: ["always"]
      block:
        - name: Verify Ansible version.
          assert:
            that: "ansible_version.full is version_compare('2.13.0', '>=')"
            msg: "You must update Ansible to at least 2.13.0 to use this version of macOS-ansible."
        - name: Verify target system is running macOS.
          assert:
            that: "ansible_distribution == 'MacOSX'"
            msg: "The target system is not running macOS."
        - name: Verify macOS version.
          assert:
            that: "ansible_distribution_version is version_compare('12', '>=')"
            msg: "The target system must be running macOS 12 (Monterey) or higher to use this version of macOS-ansible."

  tasks:
    #    - name: "Install Browsers"
    #      include_tasks: tasks/browsers.yml
    #
    - name: "Install Usability"
      include_tasks: tasks/usability.yml
    #
    - name: "Install Coding Tools"
      include_tasks: tasks/coding.yml
    #    
    #    - name: "Clone git repositories"
    #      include_tasks: tasks/git_clone.yml

    - name: "Setup Nvm Node Yarn"
      include_tasks: tasks/node_tools.yml
